(()=>{"use strict";function t(t){var e=t.tag,a=void 0===e?"div":e,r=t.className,n=t.textContent,o=void 0===n?"":n,i=t.attr,s=void 0===i?"":i,c=t.parent,l=void 0===c?"":c,u=document.createElement(a);return r&&(u.className=r),u.textContent=o,s&&Object.keys(s).forEach((function(t){return u.setAttribute(t,s[t])})),l&&l.appendChild(u),u}function e(t){var e=t.callback,a=t.nodesArray,r=t.event;(a||r)&&a.forEach((function(t){return t.addEventListener(r,e)}))}function a(t,e){return localStorage.setItem("".concat(t,"(ADyBaH4uK)"),e),e}const r=JSON.parse('{"en":{"keys":["`","1","2","3","4","5","6","7","8","9","0","-","=","Backspace","Tab","q","w","e","r","t","y","u","i","o","p","[","]","\\\\","Del","Caps Lock","a","s","d","f","g","h","j","k","l",";","\'","Enter","Shift","z","x","c","v","b","n","m",",",".","/","↑","Shift","Ctrl","Win","Alt"," ","Alt","←","↓","→","Ctrl"],"keysCapslock":["`","1","2","3","4","5","6","7","8","9","0","-","=","Backspace","Tab","Q","W","E","R","T","Y","U","I","O","P","[","]","\\\\","Del","Caps Lock","A","S","D","F","G","H","J","K","L",";","\'","Enter","Shift","Z","X","C","V","B","N","M",",",".","/","↑","Shift","Ctrl","Win","Alt"," ","Alt","←","↓","→","Ctrl"],"keysShift":["~","!","@","#","$","%","^","&","*","(",")","_","+","Backspace","Tab","Q","W","E","R","T","Y","U","I","O","P","{","}","|","Del","Caps Lock","A","S","D","F","G","H","J","K","L",":","\\"","Enter","Shift","Z","X","C","V","B","N","M","<",">","?","↑","Shift","Ctrl","Win","Alt"," ","Alt","←","↓","→","Ctrl"],"keysCapslockAndShift":["~","!","@","#","$","%","^","&","*","(",")","_","+","Backspace","Tab","q","w","e","r","t","y","u","i","o","p","{","}","|","Del","Caps Lock","a","s","d","f","g","h","j","k","l",":","\\"","Enter","Shift","z","x","c","v","b","n","m","<",">","?","↑","Shift","Ctrl","Win","Alt"," ","Alt","←","↓","→","Ctrl"]},"ru":{"keys":["ё","1","2","3","4","5","6","7","8","9","0","-","=","Backspace","Tab","й","ц","у","к","е","н","г","ш","щ","з","х","ъ","\\\\","Del","Caps Lock","ф","ы","в","а","п","р","о","л","д","ж","э","Enter","Shift","я","ч","с","м","и","т","ь","б","ю",".","↑","Shift","Ctrl","Win","Alt"," ","Alt","←","↓","→","Ctrl"],"keysCapslock":["Ё","1","2","3","4","5","6","7","8","9","0","-","=","Backspace","Tab","Й","Ц","У","К","Е","Н","Г","Ш","Щ","З","Х","Ъ","\\\\","Del","Caps Lock","Ф","Ы","В","А","П","Р","О","Л","Д","Ж","Э","Enter","Shift","Я","Ч","С","М","И","Т","Ь","Б","Ю",".","↑","Shift","Ctrl","Win","Alt"," ","Alt","←","↓","→","Ctrl"],"keysShift":["Ё","!","\\"","№",";","%",":","?","*","(",")","_","+","Backspace","Tab","Й","Ц","У","К","Е","Н","Г","Ш","Щ","З","Х","Ъ","/","Del","Caps Lock","Ф","Ы","В","А","П","Р","О","Л","Д","Ж","Э","Enter","Shift","Я","Ч","С","М","И","Т","Ь","Б","Ю",",","↑","Shift","Ctrl","Win","Alt"," ","Alt","←","↓","→","Ctrl"],"keysCapslockAndShift":["ё","!","\\"","№",";","%",":","?","*","(",")","_","+","Backspace","Tab","й","ц","у","к","е","н","г","ш","щ","з","х","ъ","\\\\","Del","Caps Lock","ф","ы","в","а","п","р","о","л","д","ж","э","Enter","Shift","я","ч","с","м","и","т","ь","б","ю",",","↑","Shift","Ctrl","Win","Alt"," ","Alt","←","↓","→","Ctrl"]},"keysCode":["Backquote","Digit1","Digit2","Digit3","Digit4","Digit5","Digit6","Digit7","Digit8","Digit9","Digit0","Minus","Equal","Backspace","Tab","KeyQ","KeyW","KeyE","KeyR","KeyT","KeyY","KeyU","KeyI","KeyO","KeyP","BracketLeft","BracketRight","Backslash","Delete","CapsLock","KeyA","KeyS","KeyD","KeyF","KeyG","KeyH","KeyJ","KeyK","KeyL","Semicolon","Quote","Enter","ShiftLeft","KeyZ","KeyX","KeyC","KeyV","KeyB","KeyN","KeyM","Comma","Period","Slash","ArrowUp","ShiftRight","ControlLeft","MetaLeft","AltLeft","Space","AltRight","ArrowLeft","ArrowDown","ArrowRight","ControlRight"]}');function n(t,e,a){var r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:"addCharacter",n=t.split("");return"addCharacter"===r&&n.splice(a,0,e),"removeCharacterBeforeCursor"===r&&a&&n.splice(a-1,1),"removeCharacterAfterCursor"===r&&n.splice(a,1),n.join("")}function o(t,e,a){var r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:0,o=arguments.length>4&&void 0!==arguments[4]?arguments[4]:"addCharacter";Object.assign(t,{value:n(t.value,a,e,o)}),t.setSelectionRange(r,r)}var i=function(t){return t.some((function(t){return t.classList.contains("activeButton")}))};function s(t){var e,a,r=t.isCapslock,n=t.isShift;return t.BUTTONS_KEYS[t.language][(e=n,a=r,e&&a?"keysCapslockAndShift":a?"keysCapslock":e?"keysShift":"keys")]}var c,l=function(t,e){return e.commandKey.includes(t)};function u(t){return t.map((function(t){return t.classList.remove("activeButton")})),[]}var f,d,y,C,h=function(){var e,a=t({className:"root",parent:document.body});e=t({tag:"header",className:"header",parent:a}),t({tag:"h1",textContent:"RSS Virtual Keyboard",className:"header__logo",parent:e});var r,n=t({tag:"main",className:"main wrap",parent:a});return r=t({tag:"footer",className:"footer",parent:a}),t({tag:"a",className:"footer__github",textContent:"MyGitHub",attr:{href:"https://github.com/ADyBaH",target:"_blank",rel:"noopener noreferrer"},parent:r}),t({tag:"h2",className:"footer__by",textContent:"© By ADyBaH 2023",attr:{href:"https://github.com/ADyBaH",target:"_blank",rel:"noopener noreferrer"},parent:r}),t({tag:"a",className:"footer__rss-img",attr:{href:"https://rs.school/",target:"_blank",rel:"noopener noreferrer"},parent:r}),n}(),k={isCapslock:!1,isShift:!1,isAlt:!1,isCtrl:!1,language:null!==("languageKeyboard",c=localStorage.getItem("".concat("languageKeyboard","(ADyBaH4uK)")))&&void 0!==c?c:a("languageKeyboard","en"),activeCtrlButton:[],activeAltButton:[],commandKey:["Backspace","Tab","Delete","CapsLock","Enter","ShiftLeft","ShiftRight","ControlLeft","MetaLeft","AltLeft","AltRight","ControlRight"],BUTTONS_KEYS:r},g=t({tag:"textarea",className:"textarea-for-keyboard",parent:h,attr:{autocomplete:"off",rows:10}}),p=t({className:"keyboard-block",parent:h}),v=(f={arrayKeys:k.BUTTONS_KEYS[k.language].keys,arrayKeysCode:k.BUTTONS_KEYS.keysCode,parentNode:p},y=f.arrayKeysCode,C=f.parentNode,(d=f.arrayKeys).map((function(e,a){return t({tag:"button",className:"keyboard-block__key",textContent:d[a],attr:{"data-keycode":y[a]},parent:C})}))),S=function(){!function(t){var e=t.buttons,a=t.arrayIgnoreCode,r=t.arrayValues;e&&e.forEach((function(t,e){a.includes(t.dataset.keycode)||Object.assign(t,{textContent:r[e]})}))}({buttons:v,arrayIgnoreCode:k.commandKey,arrayValues:s(k)})};function A(){k.language="en"===k.language?a("languageKeyboard","ru"):a("languageKeyboard","en"),S()}function B(){A(),k.isCtrl=!1,k.isAlt=!1,k.activeCtrlButton=u(k.activeCtrlButton),k.activeAltButton=u(k.activeAltButton)}t({tag:"p",textContent:"Клавиатура создана в операционной системе Windows.",className:"main__text",parent:h}),t({tag:"p",textContent:"Для переключения языка комбинация: ctrl + alt.",className:"main__text",parent:h}),e({nodesArray:v,callback:function(t){t.preventDefault();var e=t.target,a=g.selectionEnd;if(g.focus(),"ShiftRight"===e.dataset.keycode||"ShiftLeft"===e.dataset.keycode){var r=v.find((function(t){return"ShiftLeft"===t.dataset.keycode})),n=v.find((function(t){return"ShiftRight"===t.dataset.keycode}));return r&&n&&(r.classList.toggle("activeButton"),n.classList.toggle("activeButton")),k.isShift=!k.isShift,void S()}l(e.dataset.keycode,k)||o(g,a,e.textContent,a+1),"Tab"===e.dataset.keycode&&o(g,a,"    ",a+4),"Enter"===e.dataset.keycode&&o(g,a,"\n",a+1),"Backspace"===e.dataset.keycode&&o(g,a,"",a?a-=1:0,"removeCharacterBeforeCursor"),"Delete"===e.dataset.keycode&&o(g,a,"",a,"removeCharacterAfterCursor"),"CapsLock"===e.dataset.keycode&&(k.isCapslock=!k.isCapslock,S(),e.classList.toggle("activeButton")),"AltLeft"!==e.dataset.keycode&&"AltRight"!==e.dataset.keycode||(e.classList.toggle("activeButton"),k.activeAltButton.includes(e)||k.activeAltButton.push(e),k.isAlt=i(k.activeAltButton),k.isCtrl&&k.isAlt&&B()),"ControlRight"!==e.dataset.keycode&&"ControlLeft"!==e.dataset.keycode||(e.classList.toggle("activeButton"),k.activeCtrlButton.includes(e)||k.activeCtrlButton.push(e),k.isCtrl=i(k.activeCtrlButton),k.isCtrl&&k.isAlt&&B()),g.blur()},event:"mousedown"}),e({nodesArray:[document.body],callback:function(t){var e=t.code;if(k.BUTTONS_KEYS.keysCode.includes(e)){var a=g.selectionEnd;if(t.preventDefault(),g.focus(),"ShiftRight"===e||"ShiftLeft"===e){if(k.isShift)return;var r=v.find((function(t){return"ShiftLeft"===t.dataset.keycode})),n=v.find((function(t){return"ShiftRight"===t.dataset.keycode}));return r&&n&&(r.classList.add("activeButton"),n.classList.add("activeButton")),k.isShift=!0,void S()}var i=v.find((function(t){return t.dataset.keycode===e}));if(l(i.dataset.keycode,k)||o(g,a,i.textContent,a+1),"Tab"===e&&o(g,a,"    ",a+4),"Enter"===e&&o(g,a,"\n",a+1),"Backspace"===e&&o(g,a,"",a?a-1:0,"removeCharacterBeforeCursor"),"Delete"===e&&o(g,g.selectionEnd,"",a,"removeCharacterAfterCursor"),"CapsLock"===e)return k.isCapslock=!k.isCapslock,S(),void i.classList.toggle("activeButton");if("AltLeft"===e||"AltRight"===e){if(k.isCtrl&&k.isAlt)return;k.isAlt=!0,k.isCtrl&&k.isAlt&&A()}if("ControlRight"===e||"ControlLeft"===e){if(k.isCtrl&&k.isAlt)return;k.isCtrl=!0,k.isCtrl&&k.isAlt&&A()}i.classList.add("activeButton")}},event:"keydown"}),e({nodesArray:[document.body],callback:function(t){var e=t.code;if("CapsLock"!==e&&k.BUTTONS_KEYS.keysCode.includes(t.code)){if(t.preventDefault(),"ShiftRight"===e||"ShiftLeft"===e){var a=v.find((function(t){return"ShiftLeft"===t.dataset.keycode})),r=v.find((function(t){return"ShiftRight"===t.dataset.keycode}));return a&&r&&(a.classList.remove("activeButton"),r.classList.remove("activeButton")),k.isShift=!1,void S()}"AltLeft"!==e&&"AltRight"!==e||(k.isAlt=!1),"ControlRight"!==e&&"ControlLeft"!==e||(k.isCtrl=!1),v.find((function(t){return t.dataset.keycode===e})).classList.remove("activeButton"),g.blur()}},event:"keyup"})})();